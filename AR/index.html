
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<script src="js/aframe-extras.loaders.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" type="text/javascript">>< /script>
<script>

  // AFRAME.registerComponent('send-newLoop', {
  //   init: function () {
  //     var el = this.el;
  //     el.addEventListener('animation-loop', function () {
  //       console.log('loop!');
  //     });
  //   }
  // })
</script>

<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs="debugUIEnabled: false;">
    <a-assets>
        <a-asset-item id="boatfile" src="models/boat.glb"> </a-asset-item>
    </a-assets>
    <a-marker-camera preset='kanji'>
    </a-marker-camera>
    <a-entity id="boat">
          <a-entity gltf-model="#boatfile"
                    position="0 1 0"
                    scale=".002 .002 .002"
                    rotation="0 0 0"
                    animation-mixer="loop: pingpong">
          </a-entity>
    </a-entity>
    <a-light type="point" color="yellow" position="-4 4 0" intensity="2"></a-light>
    <a-light type="point" color="skyblue" position="2 1 0" intensity="4"></a-light>
    <a-light type="point" color="skyblue" position="0 4 0" intensity="2"></a-light>
  </a-scene>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" type="text/javascript">
      var socket = io();
      const scene = document.querySelector('a-scene');
//    scene.addEventListener('loaded', onSceneLoaded);
      let boat;
//      function onSceneLoaded() {
      // boat = document.querySelector('#boat').object3D;
      boat = document.querySelector('#boat');
//      }
//      var socket = io('http://10.0.1.15');
      boat.addEventListener('animation-loop', function () {
       socket.emit("newLoop", 1);
       console.log("event");
      });
  </script>
</body>
